#!/usr/bin/env bash

type vim >/dev/null || exit 1

vimruntime="$(vim - -e -T dumb --cmd 'exe "set t_cm=\<C-M>"|echo $VIMRUNTIME|quit' | tr -d '\015')"
vimruntime="${vimruntime/$'\n'}"  # Bugfix for qterminal
[[ -z "$vimruntime" ]] && echo >&2 "ERROR: VIMRUNTIME not found" && exit 1

"${vimruntime}/macros/less.sh" "$@"
